---
phase: 01-ci-foundation-and-fixture-canonicalization
plan: "01"
type: execute
wave: 1
depends_on: []
files_modified:
  - tests/fixtures/README.md
  - tests/fixtures/manifest.yaml
  - tests/fixtures/x86/.gitkeep
  - tests/fixtures/x64/.gitkeep
  - tests/fixtures/arm/.gitkeep
  - tests/README.md
  - .github/PULL_REQUEST_TEMPLATE.md
autonomous: true
requirements:
  - TEST-02
must_haves:
    truths:
      - Canonical fixtures are grouped by architecture (x86, x64, arm) in-repo.
      - Each canonical fixture has documented expected behavior and ownership metadata.
      - Fixture-set changes require explicit rationale in pull requests.
    artifacts:
      - path: tests/fixtures/manifest.yaml
        provides: Curated fixture catalog and expected outcomes
      - path: tests/fixtures/README.md
        provides: Taxonomy, metadata schema, and ownership policy
      - path: .github/PULL_REQUEST_TEMPLATE.md
        provides: Fixture-change rationale checklist
    key_links:
      - from: tests/fixtures/manifest.yaml
        to: tests/README.md
        via: documented canonical layout and metadata semantics
        pattern: tests/fixtures/(x86|x64|arm)
      - from: .github/PULL_REQUEST_TEMPLATE.md
        to: tests/fixtures/manifest.yaml
        via: review checklist requires metadata/rationale updates
        pattern: fixture
---

<objective>
Define the canonical fixture taxonomy and governance model for phase 1.

Purpose: satisfy TEST-02 by making fixture scope deterministic and reviewable.
Output: architecture-first fixture layout, metadata manifest contract, and PR checklist enforcement.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-ci-foundation-and-fixture-canonicalization/01-CONTEXT.md
@.planning/phases/01-ci-foundation-and-fixture-canonicalization/01-RESEARCH.md
@tests/run_tests.sh
@tests/README.md
@.github/PULL_REQUEST_TEMPLATE.md

Locked decisions to honor:
- top-level fixture grouping is by architecture
- fixture scope is curated core, not exhaustive corpus
- each fixture requires structured metadata sidecar
- fixture-set changes require PR rationale updates
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create canonical fixture topology and catalog</name>
  <files>tests/fixtures/x86/.gitkeep
tests/fixtures/x64/.gitkeep
tests/fixtures/arm/.gitkeep
tests/fixtures/manifest.yaml</files>
  <action>Create the canonical fixture directory topology under `tests/fixtures/` with `x86`, `x64`, and `arm` roots. Add `tests/fixtures/manifest.yaml` as the canonical metadata sidecar index for curated fixtures. Manifest entries must include at least: `fixture_id`, `arch`, `path`, `expected_outcome`, `owner`, and `notes`. Keep corpus explicitly curated and small for deterministic CI runtime.</action>
  <verify><automated>test -d tests/fixtures/x86 && test -d tests/fixtures/x64 && test -d tests/fixtures/arm && rg -n "fixture_id|arch|expected_outcome|owner" tests/fixtures/manifest.yaml</automated></verify>
  <done>Canonical architecture fixture roots and a metadata manifest exist and are ready to receive curated fixture binaries.</done>
</task>

<task type="auto">
  <name>Task 2: Document taxonomy and metadata ownership contract</name>
  <files>tests/fixtures/README.md
tests/README.md</files>
  <action>Write `tests/fixtures/README.md` describing fixture taxonomy, curated-core policy, naming conventions, and metadata requirements. Update `tests/README.md` to reference the canonical fixture catalog path and clarify that expected outcomes/ownership are tracked through the manifest and sidecar policy.</action>
  <verify><automated>rg -n "curated|manifest|ownership|expected outcomes|x86|x64|arm" tests/fixtures/README.md tests/README.md</automated></verify>
  <done>Contributor-facing testing docs clearly define where fixtures live, what metadata is required, and how expectations are tracked.</done>
</task>

<task type="auto">
  <name>Task 3: Add fixture governance to PR review checklist</name>
  <files>.github/PULL_REQUEST_TEMPLATE.md</files>
  <action>Extend the PR template with an explicit checklist item for fixture-set modifications. The checklist must require rationale and `tests/fixtures/manifest.yaml` updates whenever fixtures are added/removed/renamed so fixture governance is enforced in review.</action>
  <verify><automated>rg -n "fixture|manifest|rationale" .github/PULL_REQUEST_TEMPLATE.md</automated></verify>
  <done>PRs that alter fixture sets must acknowledge rationale and metadata updates before merge.</done>
</task>

</tasks>

<verification>
Confirm canonical fixture directories and metadata docs exist, and PR template includes fixture-governance checks.
</verification>

<success_criteria>
- `tests/fixtures/{x86,x64,arm}/` exists
- `tests/fixtures/manifest.yaml` defines required metadata fields
- `tests/fixtures/README.md` and `tests/README.md` document taxonomy + ownership policy
- PR template enforces fixture-change rationale/metadata updates
</success_criteria>

<output>
After completion, create `.planning/phases/01-ci-foundation-and-fixture-canonicalization/01-01-SUMMARY.md`
</output>
