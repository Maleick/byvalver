---
phase: 03-arm-strategy-expansion
plan: "03"
type: execute
wave: 3
depends_on:
  - "02"
files_modified:
  - src/arm_strategies.c
  - assets/tests/test_arm_strategies.c
  - tests/fixtures/manifest.yaml
  - tests/README.md
autonomous: true
requirements:
  - ARM-04
must_haves:
    truths:
      - Branch-first conditional alternatives are implemented for covered ARM branch patterns.
      - Conditional alternatives preserve branch target and fall-through semantics for covered cases.
      - Deterministic ARM fixtures capture conditional rewrite regressions.
    artifacts:
      - path: src/arm_strategies.c
        provides: Conditional branch alternative strategy set and registration
      - path: assets/tests/test_arm_strategies.c
        provides: Focused conditional branch rewrite regression checks
      - path: tests/README.md
        provides: Contributor guidance for ARM conditional fixture/verification triage
    key_links:
      - from: src/arm_strategies.c
        to: assets/tests/test_arm_strategies.c
        via: Conditional branch strategy behavior is asserted in focused ARM tests
        pattern: branch
      - from: tests/fixtures/manifest.yaml
        to: tests/run_tests.sh
        via: Deterministic ARM conditional fixtures are selected by manifest metadata
        pattern: arm
      - from: tests/README.md
        to: tests/fixtures/manifest.yaml
        via: Documentation maps conditional fixture IDs to verification workflow
        pattern: fixture
---

<objective>
Implement branch-first ARM conditional alternatives with deterministic regression coverage and explicit scope guardrails.

Purpose: satisfy ARM-04 for high-frequency conditional transformation failures without expanding into broader conditional families.
Output: conditional branch alternative strategies, fixtures, tests, and triage documentation.
</objective>

<execution_context>
@/Users/maleick/.codex/get-shit-done/workflows/execute-plan.md
@/Users/maleick/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-arm-strategy-expansion/03-CONTEXT.md
@.planning/phases/03-arm-strategy-expansion/03-RESEARCH.md
@.planning/phases/03-arm-strategy-expansion/03-02-PLAN.md
@src/arm_strategies.c
@assets/tests/test_arm_strategies.c
@tests/fixtures/manifest.yaml
@tests/README.md

Locked decisions to honor:
- Conditional scope is branch-first only in Phase 3.
- Predicated ALU/memory conditional rewrites are explicitly deferred.
- Deterministic ARM regression fixtures are mandatory.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement branch-first conditional alternative strategies</name>
  <files>src/arm_strategies.c</files>
  <action>Implement and register conditional branch alternatives for covered ARM branch patterns using control-flow-preserving transformations (for example, condition inversion with equivalent branch behavior). Keep behavior bounded to explicitly supported forms.</action>
  <verify><automated>rg -n "branch|conditional|can_handle|generate|register_arm_jump_strategies" src/arm_strategies.c</automated></verify>
  <done>ARM branch-first conditional alternatives are available for covered cases with deterministic fallback behavior.</done>
</task>

<task type="auto">
  <name>Task 2: Enforce branch-first scope guard and defer broader conditional families</name>
  <files>src/arm_strategies.c
tests/README.md</files>
  <action>Ensure implementation and documentation clearly limit Phase 3 conditional work to branch alternatives only, and record predicated ALU/memory conditional rewrites as deferred scope.</action>
  <verify><automated>rg -n "branch-first|defer|predicated|conditional" src/arm_strategies.c tests/README.md</automated></verify>
  <done>Phase 3 conditional implementation remains within locked branch-first scope with clear deferred notes.</done>
</task>

<task type="auto">
  <name>Task 3: Add deterministic conditional regression fixtures and tests</name>
  <files>assets/tests/test_arm_strategies.c
tests/fixtures/manifest.yaml</files>
  <action>Add deterministic ARM conditional branch fixtures and extend ARM strategy tests to assert target/fall-through semantic preservation for covered alternative rewrites.</action>
  <verify><automated>rg -n "conditional|branch|fixture_id|arm" tests/fixtures/manifest.yaml assets/tests/test_arm_strategies.c</automated></verify>
  <done>Conditional branch alternatives are covered by deterministic fixtures and focused ARM regression checks.</done>
</task>

</tasks>

<verification>
Validate that branch-first conditional alternatives preserve covered branch semantics and are represented in deterministic ARM regression evidence.
</verification>

<success_criteria>
- Conditional branch alternatives are implemented for covered high-frequency cases
- Scope stays branch-first with broader conditional families explicitly deferred
- Deterministic ARM conditional fixtures and strategy tests are in place
- ARM-04 is covered by implementation-oriented plan outputs
</success_criteria>

<output>
After completion, create `.planning/phases/03-arm-strategy-expansion/03-03-SUMMARY.md`
</output>
